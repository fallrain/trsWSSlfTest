<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title></title>
</head>
<style>
  .v-slt {

  }

  .red-bg {
    background: red;
  }

  .blue {
    color: blue;
  }

  fieldset {
    margin-bottom: 10px;
    margin-top: 10px;
  }
</style>
<body>
<div id="app">
  <p>
    <label>Message:</label><input type="text" v-model="message">{{message}}
  </p>
  <p>
    <label><span id="beNewSpan">现在没值：</span>{{data.newVal}}</label>
    <button type="button" v-on:click="showTips();">设置值</button>
  </p>
  <slt v-for="person in persons" v-bind:person="person"></slt>
  {{2+1}}
  <div>{{computeVal}}</div>
  <p>
    <label v-bind:class="{'red-bg':isRedBg}" id="mybj">现在没有背景</label>
    <button v-on:click="changeBg();">改变背景</button>
  </p>
  <fieldset>
    <legend>if else</legend>
    <div v-if="isIf">显示if</div>
    <div v-else="">显示else</div>
    <div v-else="">显示第二个else</div>
  </fieldset>
  <fieldset>
    <legend>带其他参数的for循环</legend>
    <ul>
      <li v-for="(item,index) in persons">这是第{{index+1}}个：{{item.name}}</li>
    </ul>
  </fieldset>
  <fieldset>
    <legend>整数迭代，类似于for循环</legend>
    <ul>
      <li v-for="i in 5">{{i}}</li>
    </ul>
  </fieldset>
  <fieldset>
    <legend>单选多选框测试</legend>
    <span>性别：</span>
    <label><input type="radio" value="男" v-model="rdSex">男</label>
    <label><input type="radio" value="女" v-model="rdSex">女</label>
    <div>选中的性别：{{rdSex[0]}}</div>
    <span>爱好：</span>
    <label><input type="checkbox" value="游泳" v-model="ckAihao">游泳</label>
    <label><input type="checkbox" value="Dota" v-model="ckAihao">Dota</label>
    <label><input type="checkbox" value="魔兽" v-model="ckAihao">魔兽</label>
    <label><input type="checkbox" value="把妹" v-model="ckAihao">把妹</label>
    <ul>
      <li v-for="ah in ckAihao">{{ah}}</li>
    </ul>
  </fieldset>
  <fieldset>
    <legend>下拉框</legend>
    <select v-model="slts">
      <option value="你那不是直">你那不是直</option>
      <option value="你那是傻逼阿">你那是傻逼阿</option>
      <option value="你还傻逼呵呵的">你还傻逼呵呵的</option>
    </select>
    <div>选中的是：{{slts}}</div>
  </fieldset>
  <fieldset>
    <legend>异步刷新测试</legend>
    <div>
      <span>这是老的值：</span> <label id="setNewValOldVal">{{setNewValOldVal}}</label>
    </div>
    <button type="button" v-on:click="setNewValTest();">设置新值后立即判断</button>
    <button type="button" v-on:click="setNewValTest(true);">设置新值后等待刷新完再判断</button>
  </fieldset>
</div>
<script src="../js/jquery-1.11.0.js"></script>
<script src="../js/Vue.js"></script>
<script>
  Vue.component('slt', {
    props : ['person'],
    template : '<li class="v-slt" >{{person.name}}</li>'
  });
  var app;
  app = new Vue({
    el : '#app',
    data : {
      isRedBg : false,
      message : 'Hello Vue!',
      data : {},
      isIf : false,
      rdSex : [],
      ckAihao : [],
      slts : '你那不是直',
      setNewValOldVal : '这是老的值',
      persons : [
        {
          name : 'wangchenhao'
        },
        {
          name : 'wangdaer'
        },
        {
          name : 'chenchunmei'
        }
      ]
    },
    methods : {
      showTips : function(){
        var vthis = this;
        setTimeout(function(){
          vthis.$set(vthis.data, 'newVal', '设置完了新的值');
          $('#beNewSpan').html('现在有值了：');
        }, 2000);
      },
      changeBg : function(){
        this.isRedBg = true;
        $('#mybj').html('背景红色');
      },
      setNewValTest : function(lazy){
        if(lazy){
          this.setNewValOldVal = '延迟判断值';
          Vue.nextTick(function(){
            if($('#setNewValOldVal').text() === '延迟判断值'){
              alert('和新值相等');
            }else{
              alert('和新值不相等');
            }
          });
        }else{
          this.setNewValOldVal = '立即判断值';
          if($('#setNewValOldVal').text() === '立即判断值'){
            alert('和新值相等');
          }else{
            alert('和新值不相等');
          }
        }
      }
    },
    computed : {
      computeVal : function(){
        var vthis = this;
        var val = '';
        for(var i = 0; i < 2; i++){
          val += 'a';
        }
        return val;
      }
    }
  });

</script>
</body>
</html>